<!DOCTYPE html>
<html lang="de" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kundenonboarding | TX-Partner</title>
    <meta name="robots" content="noindex, nofollow">
    <meta name="description" content="Kundenonboarding für TX-Partner.">
    <link rel="icon" href="/favicon.png" type="image/png">
    <link rel="stylesheet" href="assets/css/fonts.css">
    <script src="assets/tailwind-playcdn.js"></script>    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        brand: {
                            navy: '#1E3A5F',
                            teal: '#3A9EAF',
                            tealDark: '#2C7A87',
                        },
                        dark: {
                            bg: '#050505',
                            surface: '#0F0F0F',
                            border: 'rgba(255,255,255,0.08)',
                        },
                    },
                    borderRadius: {
                        'card': '32px',
                        'button': '16px',
                    },
                    letterSpacing: {
                        tight: '-0.02em',
                        tighter: '-0.04em',
                    },
                    animation: {
                        'check-bounce': 'checkBounce 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards',
                    },
                    keyframes: {
                        checkBounce: {
                            '0%': { transform: 'scale(0)' },
                            '100%': { transform: 'scale(1)' }
                        }
                    }
                }
            }
        }
    </script>

    <style>
        
        html { scroll-behavior: smooth; }

        .bg-noise {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            pointer-events: none; z-index: 50; opacity: 0.03;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }
        
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }
        
        :focus-visible {
            outline: 2px solid #3A9EAF;
            outline-offset: 2px;
            border-radius: 4px;
        }

        .drag-active {
            border-color: #3A9EAF !important;
            background-color: rgba(58, 158, 175, 0.05) !important;
        }

        .is-valid { border-color: #10B981 !important; }
        .is-invalid { border-color: #EF4444 !important; }
        .error-msg { display: none; font-size: 0.75rem; color: #EF4444; margin-top: 0.25rem; }
        .is-invalid + .error-msg { display: block; }

        .loader {
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top: 2px solid white;
            width: 16px;
            height: 16px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        .icon { display: inline-block; vertical-align: middle; }
    </style>
</head>

<body class="antialiased selection:bg-brand-teal selection:text-white dark:bg-dark-bg dark:text-white transition-colors duration-300 text-slate-900 bg-slate-50 font-sans">

    <div class="bg-noise"></div>

    <!-- Header -->
    <header class="fixed top-0 left-0 w-full z-40 bg-slate-50/80 dark:bg-dark-bg/80 backdrop-blur-md border-b border-slate-200 dark:border-white/5">
        <div class="container mx-auto px-6 h-16 flex items-center justify-between max-w-2xl">
            <div class="flex items-center gap-3">
                <div class="flex gap-1 h-5 items-center">
                    <div class="w-1 h-5 rounded-full bg-brand-navy dark:bg-slate-200"></div>
                    <div class="w-1 h-5 rounded-full bg-brand-navy dark:bg-slate-200"></div>
                    <div class="w-1 h-5 rounded-full bg-brand-navy dark:bg-slate-200"></div>
                    <div class="w-1 h-5 bg-brand-teal rounded-full"></div>
                </div>
                <span class="font-bold text-lg tracking-tight text-brand-navy dark:text-white">TX-Partner</span>
            </div>
            
            <!-- Dark Mode Toggle -->
            <button id="theme-toggle" class="p-2 rounded-full hover:bg-slate-100 dark:hover:bg-white/10 text-slate-500 dark:text-slate-400 transition-colors" aria-label="Dark Mode umschalten" title="Dark Mode umschalten">
                <span class="block dark:hidden">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"></path></svg>
                </span>
                <span class="hidden dark:block">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"></path></svg>
                </span>
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="pt-28 pb-20 px-4 min-h-screen relative flex items-center justify-center">
        
        <div class="fixed top-1/4 left-1/2 -translate-x-1/2 w-[600px] h-[600px] bg-brand-teal/5 rounded-full blur-[100px] -z-10 pointer-events-none"></div>

        <div class="w-full max-w-2xl relative z-10">
            
            <!-- Welcome Header -->
            <div class="text-center mb-10" id="header-content">
                <h1 class="text-3xl md:text-4xl font-bold text-brand-navy dark:text-white mb-3 tracking-tight">Willkommen bei TX-Partner</h1>
                <p class="text-slate-500 dark:text-slate-400">Bitte vervollständigen Sie Ihre Angaben, um das Onboarding abzuschließen.</p>
            </div>

            <!-- Success Message (Hidden by default) -->
            <div id="success-view" class="hidden text-center py-10">
                <div class="w-20 h-20 bg-brand-teal/10 rounded-full flex items-center justify-center mx-auto mb-6 animate-check-bounce">
                    <svg class="w-10 h-10 text-brand-teal" fill="none" stroke="currentColor" stroke-width="3" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path></svg>
                </div>
                <h2 class="text-3xl font-bold text-brand-navy dark:text-white mb-4">Vielen Dank!</h2>
                <p class="text-slate-500 dark:text-slate-400 max-w-md mx-auto mb-8 text-lg">
                    Ihre Daten wurden erfolgreich und sicher übermittelt. Wir prüfen Ihre Angaben und melden uns innerhalb von 24 Stunden bei Ihnen.
                </p>
                
                <div class="bg-white dark:bg-dark-surface border border-slate-200 dark:border-white/10 rounded-2xl p-6 max-w-sm mx-auto shadow-lg shadow-brand-navy/5">
                    <p class="text-sm font-semibold text-brand-navy dark:text-white mb-2">Haben Sie Fragen?</p>
                    <div class="flex items-center justify-center gap-2 text-slate-500 dark:text-slate-400 text-sm mb-1">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"></path></svg>
                        <a href="mailto:info@tx-partner.com" class="hover:text-brand-teal transition-colors">info@tx-partner.com</a>
                    </div>
                </div>
            </div>

            <!-- Form Container -->
            <form id="onboardingForm" class="bg-white dark:bg-[#0A0A0A] border border-slate-200 dark:border-white/10 rounded-3xl shadow-2xl shadow-slate-200/50 dark:shadow-black/50 overflow-hidden relative" novalidate>
                
                <!-- Progress Bar -->
                <div class="absolute top-0 left-0 w-full h-1 bg-slate-100 dark:bg-white/5">
                    <div id="progress-bar" class="h-full bg-brand-teal transition-all duration-500 w-[10%]"></div>
                </div>

                <div class="p-6 md:p-10">

                    <!-- Customer Type Toggle -->
                    <div class="flex justify-center mb-10">
                        <div class="bg-slate-100 dark:bg-white/5 p-1 rounded-xl flex relative w-full max-w-sm border border-slate-200 dark:border-white/5">
                            <div id="toggle-bg" class="absolute top-1 left-1 w-[calc(50%-4px)] h-[calc(100%-8px)] bg-white dark:bg-brand-navy shadow-sm rounded-lg transition-all duration-300 ease-in-out z-0 translate-x-0"></div>
                            
                            <button type="button" onclick="setCustomerType('private')" id="btn-private" class="flex-1 relative z-10 py-2.5 text-sm font-semibold text-center rounded-lg transition-colors duration-300 text-brand-navy dark:text-white">
                                Privatkunde
                            </button>
                            <button type="button" onclick="setCustomerType('business')" id="btn-business" class="flex-1 relative z-10 py-2.5 text-sm font-semibold text-center rounded-lg transition-colors duration-300 text-slate-500 dark:text-slate-400 hover:text-brand-navy dark:hover:text-white">
                                Geschäftskunde
                            </button>
                        </div>
                        <input type="hidden" id="customerType" name="customerType" value="private">
                    </div>

                    <!-- Referral Source -->
                    <div class="mb-8">
                        <label for="referral" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Wie haben Sie von uns erfahren?</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none text-slate-400">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>
                            </div>
                            <select id="referral" class="block w-full pl-10 pr-10 py-3 text-sm bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl text-brand-navy dark:text-white appearance-none focus:ring-1 focus:ring-brand-teal focus:border-brand-teal transition-all">
                                <option value="" disabled selected>Bitte auswählen...</option>
                                <option value="google">Google Suche</option>
                                <option value="recommendation">Empfehlung</option>
                                <option value="linkedin">Social Media (LinkedIn, X)</option>
                                <option value="tax_advisor">Steuerberater</option>
                                <option value="media">Podcast / YouTube</option>
                                <option value="other">Sonstiges</option>
                            </select>
                            <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none text-slate-400">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path></svg>
                            </div>
                        </div>
                    </div>

                    <hr class="border-slate-100 dark:border-white/5 mb-8">

                    <!-- SECTION: PRIVATE CUSTOMER -->
                    <div id="section-private" class="space-y-6">
                        <h3 class="text-sm font-bold uppercase tracking-wider text-brand-teal mb-4 flex items-center gap-2 font-mono">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"></path></svg>
                            Persönliche Daten
                        </h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                            <div>
                                <label class="block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1.5 ml-1">Vorname *</label>
                                <input type="text" id="p_firstname" required class="w-full px-4 py-3 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 text-brand-navy dark:text-white focus:border-brand-teal transition-all placeholder-slate-400 dark:placeholder-slate-600 text-sm" placeholder="Max">
                                <span class="error-msg">Bitte geben Sie Ihren Vornamen an.</span>
                            </div>
                            <div>
                                <label class="block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1.5 ml-1">Nachname *</label>
                                <input type="text" id="p_lastname" required class="w-full px-4 py-3 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 text-brand-navy dark:text-white focus:border-brand-teal transition-all placeholder-slate-400 dark:placeholder-slate-600 text-sm" placeholder="Mustermann">
                                <span class="error-msg">Bitte geben Sie Ihren Nachnamen an.</span>
                            </div>
                            
                            <div class="md:col-span-2">
                                <label class="block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1.5 ml-1">E-Mail-Adresse *</label>
                                <div class="relative">
                                    <span class="absolute left-3.5 top-3.5 text-slate-400">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"></path></svg>
                                    </span>
                                    <input type="email" id="p_email" required class="w-full pl-10 pr-4 py-3 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 text-brand-navy dark:text-white focus:border-brand-teal transition-all placeholder-slate-400 dark:placeholder-slate-600 text-sm" placeholder="max@beispiel.at">
                                </div>
                                <span class="error-msg">Bitte geben Sie eine gültige E-Mail-Adresse ein.</span>
                            </div>
                            
                            <div class="md:col-span-1">
                                <label class="block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1.5 ml-1">Telefonnummer *</label>
                                <div class="relative">
                                    <span class="absolute left-3.5 top-3.5 text-slate-400">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"></path></svg>
                                    </span>
                                    <input type="tel" id="p_phone" required class="w-full pl-10 pr-4 py-3 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 text-brand-navy dark:text-white focus:border-brand-teal transition-all placeholder-slate-400 dark:placeholder-slate-600 text-sm" placeholder="+43 664 1234567">
                                </div>
                                <span class="error-msg">Bitte geben Sie eine gültige Telefonnummer ein.</span>
                            </div>

                            <div class="md:col-span-1">
                                <label class="block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1.5 ml-1">Geburtsdatum *</label>
                                <div class="relative">
                                    <span class="absolute left-3.5 top-3.5 text-slate-400">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"></path></svg>
                                    </span>
                                    <input type="date" id="p_birthdate" required class="w-full pl-10 pr-4 py-3 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 text-brand-navy dark:text-white focus:border-brand-teal transition-all placeholder-slate-400 dark:placeholder-slate-600 text-sm [color-scheme:light] dark:[color-scheme:dark]">
                                </div>
                                <span class="error-msg">Sie müssen mindestens 18 Jahre alt sein.</span>
                            </div>

                            <div class="md:col-span-2">
                                <label class="block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1.5 ml-1">Straße &amp; Hausnummer *</label>
                                <input type="text" id="p_street" required class="w-full px-4 py-3 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 text-brand-navy dark:text-white focus:border-brand-teal transition-all placeholder-slate-400 dark:placeholder-slate-600 text-sm" placeholder="Musterstraße 1/12">
                                <span class="error-msg">Pflichtfeld.</span>
                            </div>
                            
                            <div>
                                <label class="block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1.5 ml-1">Postleitzahl *</label>
                                <input type="text" id="p_zip" required class="w-full px-4 py-3 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 text-brand-navy dark:text-white focus:border-brand-teal transition-all placeholder-slate-400 dark:placeholder-slate-600 text-sm" placeholder="1010">
                                <span class="error-msg">Pflichtfeld.</span>
                            </div>
                            
                            <div>
                                <label class="block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1.5 ml-1">Stadt *</label>
                                <input type="text" id="p_city" required class="w-full px-4 py-3 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 text-brand-navy dark:text-white focus:border-brand-teal transition-all placeholder-slate-400 dark:placeholder-slate-600 text-sm" placeholder="Wien">
                                <span class="error-msg">Pflichtfeld.</span>
                            </div>
                            
                            <div class="md:col-span-2">
                                <label class="block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1.5 ml-1">Land *</label>
                                <div class="relative">
                                    <select id="p_country" required class="block w-full pl-4 pr-10 py-3 text-sm bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl text-brand-navy dark:text-white appearance-none focus:ring-1 focus:ring-brand-teal focus:border-brand-teal transition-all">
                                        <option value="AT" selected>Österreich</option>
                                        <option value="DE">Deutschland</option>
                                        <option value="CH">Schweiz</option>
                                        <option value="BE">Belgien</option>
                                        <option value="BG">Bulgarien</option>
                                        <option value="DK">Dänemark</option>
                                        <option value="EE">Estland</option>
                                        <option value="FI">Finnland</option>
                                        <option value="FR">Frankreich</option>
                                        <option value="GR">Griechenland</option>
                                        <option value="IE">Irland</option>
                                        <option value="IT">Italien</option>
                                        <option value="HR">Kroatien</option>
                                        <option value="LV">Lettland</option>
                                        <option value="LT">Litauen</option>
                                        <option value="LU">Luxemburg</option>
                                        <option value="MT">Malta</option>
                                        <option value="NL">Niederlande</option>
                                        <option value="PL">Polen</option>
                                        <option value="PT">Portugal</option>
                                        <option value="RO">Rumänien</option>
                                        <option value="SE">Schweden</option>
                                        <option value="SK">Slowakei</option>
                                        <option value="SI">Slowenien</option>
                                        <option value="ES">Spanien</option>
                                        <option value="CZ">Tschechien</option>
                                        <option value="HU">Ungarn</option>
                                        <option value="GB">Vereinigtes Königreich</option>
                                        <option value="US">USA</option>
                                        <option value="CY">Zypern</option>
                                    </select>
                                    <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none text-slate-400">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path></svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- SECTION: BUSINESS CUSTOMER (Hidden by default) -->
                    <div id="section-business" class="hidden space-y-6">
                        <h3 class="text-sm font-bold uppercase tracking-wider text-brand-teal mb-4 flex items-center gap-2 font-mono">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21M3 3h12m-.75 4.5H21m-3.75 3h.008v.008h-.008v-.008zm0 3h.008v.008h-.008v-.008zm0 3h.008v.008h-.008v-.008z"></path></svg>
                            Firmendaten
                        </h3>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                            <div class="md:col-span-2">
                                <label class="block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1.5 ml-1">Firmenname *</label>
                                <input type="text" id="b_company" class="w-full px-4 py-3 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 text-brand-navy dark:text-white focus:border-brand-teal transition-all placeholder-slate-400 dark:placeholder-slate-600 text-sm" placeholder="Muster GmbH">
                                <span class="error-msg">Pflichtfeld.</span>
                            </div>

                            <div class="md:col-span-2">
                                <label class="block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1.5 ml-1">Ansprechpartner (Vor- &amp; Nachname) *</label>
                                <input type="text" id="b_contact" class="w-full px-4 py-3 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 text-brand-navy dark:text-white focus:border-brand-teal transition-all placeholder-slate-400 dark:placeholder-slate-600 text-sm" placeholder="Maria Muster">
                                <span class="error-msg">Pflichtfeld.</span>
                            </div>

                            <div class="md:col-span-1">
                                <label class="block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1.5 ml-1">E-Mail-Adresse *</label>
                                <div class="relative">
                                    <span class="absolute left-3.5 top-3.5 text-slate-400">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"></path></svg>
                                    </span>
                                    <input type="email" id="b_email" class="w-full pl-10 pr-4 py-3 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 text-brand-navy dark:text-white focus:border-brand-teal transition-all placeholder-slate-400 dark:placeholder-slate-600 text-sm" placeholder="office@muster.gmbh">
                                </div>
                                <span class="error-msg">Gültige E-Mail erforderlich.</span>
                            </div>

                            <div class="md:col-span-1">
                                <label class="block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1.5 ml-1">Telefonnummer *</label>
                                <div class="relative">
                                    <span class="absolute left-3.5 top-3.5 text-slate-400">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"></path></svg>
                                    </span>
                                    <input type="tel" id="b_phone" class="w-full pl-10 pr-4 py-3 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 text-brand-navy dark:text-white focus:border-brand-teal transition-all placeholder-slate-400 dark:placeholder-slate-600 text-sm" placeholder="+43 1 2345678">
                                </div>
                                <span class="error-msg">Telefonnummer erforderlich.</span>
                            </div>

                            <div class="md:col-span-2">
                                <label class="block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1.5 ml-1">Straße &amp; Hausnummer *</label>
                                <input type="text" id="b_street" class="w-full px-4 py-3 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 text-brand-navy dark:text-white focus:border-brand-teal transition-all placeholder-slate-400 dark:placeholder-slate-600 text-sm" placeholder="Gewerbepark 1">
                                <span class="error-msg">Pflichtfeld.</span>
                            </div>

                            <div>
                                <label class="block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1.5 ml-1">Postleitzahl *</label>
                                <input type="text" id="b_zip" class="w-full px-4 py-3 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 text-brand-navy dark:text-white focus:border-brand-teal transition-all placeholder-slate-400 dark:placeholder-slate-600 text-sm" placeholder="4020">
                                <span class="error-msg">Pflichtfeld.</span>
                            </div>

                            <div>
                                <label class="block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1.5 ml-1">Stadt *</label>
                                <input type="text" id="b_city" class="w-full px-4 py-3 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 text-brand-navy dark:text-white focus:border-brand-teal transition-all placeholder-slate-400 dark:placeholder-slate-600 text-sm" placeholder="Linz">
                                <span class="error-msg">Pflichtfeld.</span>
                            </div>

                            <div class="md:col-span-2">
                                <label class="block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1.5 ml-1">Land *</label>
                                <div class="relative">
                                    <select id="b_country" class="block w-full pl-4 pr-10 py-3 text-sm bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl text-brand-navy dark:text-white appearance-none focus:ring-1 focus:ring-brand-teal focus:border-brand-teal transition-all">
                                        <option value="AT" selected>Österreich</option>
                                        <option value="DE">Deutschland</option>
                                    </select>
                                    <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none text-slate-400">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path></svg>
                                    </div>
                                </div>
                            </div>

                            <div class="md:col-span-1">
                                <label class="block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1.5 ml-1">UID-Nummer *</label>
                                <div class="relative">
                                    <span class="absolute left-3.5 top-3.5 text-slate-400">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5l-3.9 19.5m-2.1-19.5l-3.9 19.5"></path></svg>
                                    </span>
                                    <input type="text" id="b_uid" class="w-full pl-10 pr-4 py-3 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 text-brand-navy dark:text-white focus:border-brand-teal transition-all placeholder-slate-400 dark:placeholder-slate-600 text-sm font-mono" placeholder="ATU12345678" data-placeholder-at="ATU12345678" data-placeholder-de="DE123456789">
                                </div>
                                <span class="error-msg" id="b_uid_error">Format: ATU gefolgt von 8 Ziffern.</span>
                            </div>

                            <div class="md:col-span-1">
                                <label class="block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1.5 ml-1">Firmenbuch-/Handelsregisternummer</label>
                                <div class="relative">
                                    <span class="absolute left-3.5 top-3.5 text-slate-400">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"></path></svg>
                                    </span>
                                    <input type="text" id="b_fb" class="w-full pl-10 pr-4 py-3 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 text-brand-navy dark:text-white focus:border-brand-teal transition-all placeholder-slate-400 dark:placeholder-slate-600 text-sm font-mono" placeholder="FN 123456x" data-placeholder-at="FN 123456x" data-placeholder-de="HRB 12345">
                                </div>
                                <span class="error-msg" id="b_fb_error">Gültige Nummer erforderlich.</span>
                            </div>
                        </div>
                    </div>

                    <hr class="border-slate-100 dark:border-white/5 my-8">

                    <!-- Legal -->
                    <div class="space-y-3 mb-8">
                        <label class="flex items-start gap-3 cursor-pointer group">
                            <input type="checkbox" id="legal_privacy" required class="mt-1 w-4 h-4 rounded border-slate-300 text-brand-teal focus:ring-brand-teal bg-slate-50 dark:bg-white/5 dark:border-white/10">
                            <span class="text-sm text-slate-500 dark:text-slate-400 group-hover:text-brand-navy dark:group-hover:text-slate-300 transition-colors">
                                Ich habe die <a href="datenschutz.html" class="text-brand-teal hover:underline underline-offset-2">Datenschutzerklärung</a> gelesen und akzeptiere diese. *
                            </span>
                        </label>
                        <label class="flex items-start gap-3 cursor-pointer group">
                            <input type="checkbox" id="legal_terms" required class="mt-1 w-4 h-4 rounded border-slate-300 text-brand-teal focus:ring-brand-teal bg-slate-50 dark:bg-white/5 dark:border-white/10">
                            <span class="text-sm text-slate-500 dark:text-slate-400 group-hover:text-brand-navy dark:group-hover:text-slate-300 transition-colors">
                                Ich akzeptiere die <a href="agb.html" class="text-brand-teal hover:underline underline-offset-2">Allgemeinen Geschäftsbedingungen (AGB)</a>. *
                            </span>
                        </label>
                        <span class="error-msg" id="legal_error">Bitte akzeptieren Sie die rechtlichen Bedingungen.</span>
                    </div>

                    <!-- Submit Button -->
                    <div class="sticky bottom-4 md:static z-20">
                        <button type="submit" id="submitBtn" class="w-full bg-brand-teal hover:bg-brand-tealDark text-white font-bold py-4 rounded-xl shadow-lg shadow-brand-teal/20 hover:shadow-brand-teal/40 transform transition-all active:scale-[0.98] flex items-center justify-center gap-2 group">
                            <span>Onboarding abschließen</span>
                            <svg class="w-5 h-5 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"></path></svg>
                        </button>
                    </div>

                </div>
            </form>

        </div>
    </main>

    <!-- Footer -->
    <footer class="py-8 text-center text-xs text-slate-400 dark:text-slate-600 border-t border-slate-100 dark:border-white/5 bg-white dark:bg-dark-bg">
        <div class="container mx-auto px-4 max-w-2xl">
            <p class="mb-4 font-mono">© 2026 TX-Partner – eine Marke bzw. Geschäftsbezeichnung der Solvum GmbH. Alle Rechte vorbehalten.</p>
            <div class="flex justify-center gap-6">
                <a href="agb.html" class="text-brand-teal hover:underline underline-offset-2 transition-colors">AGB</a>
                <a href="datenschutz.html" class="text-brand-teal hover:underline underline-offset-2 transition-colors">Datenschutz</a>
                <a href="impressum.html" class="text-brand-teal hover:underline underline-offset-2 transition-colors">Impressum</a>
            </div>
        </div>
    </footer>

    <script>
        // Dark Mode Logic
        const themeToggle = document.getElementById('theme-toggle');
        const html = document.documentElement;
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            html.classList.add('dark');
        } else {
            html.classList.remove('dark');
        }
        themeToggle.addEventListener('click', () => {
            html.classList.toggle('dark');
            localStorage.theme = html.classList.contains('dark') ? 'dark' : 'light';
        });

        // Toggle Logic
        let currentType = 'private';
        const progressBar = document.getElementById('progress-bar');
        
        function setCustomerType(type) {
            currentType = type;
            document.getElementById('customerType').value = type;
            
            const btnPrivate = document.getElementById('btn-private');
            const btnBusiness = document.getElementById('btn-business');
            const bg = document.getElementById('toggle-bg');
            const secPrivate = document.getElementById('section-private');
            const secBusiness = document.getElementById('section-business');

            if (type === 'private') {
                bg.style.transform = 'translateX(0)';
                btnPrivate.classList.replace('text-slate-500', 'text-brand-navy');
                btnPrivate.classList.add('dark:text-white');
                btnBusiness.classList.replace('text-brand-navy', 'text-slate-500');
                btnBusiness.classList.remove('dark:text-white');
                
                secPrivate.classList.remove('hidden');
                secBusiness.classList.add('hidden');

                document.querySelectorAll('#section-private input, #section-private select').forEach(el => {
                   el.required = true;
                });
                document.querySelectorAll('#section-business input, #section-business select').forEach(el => el.required = false);
                
            } else {
                bg.style.transform = 'translateX(100%)';
                btnBusiness.classList.replace('text-slate-500', 'text-brand-navy');
                btnBusiness.classList.add('dark:text-white');
                btnPrivate.classList.replace('text-brand-navy', 'text-slate-500');
                btnPrivate.classList.remove('dark:text-white');

                secBusiness.classList.remove('hidden');
                secPrivate.classList.add('hidden');

                document.querySelectorAll('#section-business input, #section-business select').forEach(el => {
                    // Company register is optional due to varying international formats
                    if (el.id === 'b_fb') {
                        el.required = false;
                    } else {
                        el.required = true;
                    }
                });
                document.querySelectorAll('#section-private input, #section-private select').forEach(el => el.required = false);
            }
            updateProgress();
        }

        // Initialize Validation Constraints
        const p_birthdate = document.getElementById('p_birthdate');
        const today = new Date();
        const maxDate = new Date(today.getFullYear() - 18, today.getMonth(), today.getDate()).toISOString().split('T')[0];
        p_birthdate.max = maxDate;

        // Validation Logic
        const patterns = {
            email: /^[^\s@]+@[^\s@]+\.[^\s@]+$/,
            uid: {
                AT: /^ATU[0-9]{8}$/i,
                DE: /^DE[0-9]{9}$/i
            },
            companyRegister: {
                AT: /^FN\s?[0-9]{6}[a-zA-Z]$/i,
                DE: /^(HRB|HRA)\s?[0-9]{1,6}[a-zA-Z]?$/i
            }
        };

        function validateInput(input) {
            const val = input.value.trim();
            let valid = true;

            if (input.required && !val) valid = false;

            if (val && input.type === 'email' && !patterns.email.test(val)) valid = false;

            // Dynamic UID validation based on selected country
            if (val && input.id === 'b_uid') {
                const country = document.getElementById('b_country').value;
                const uidPattern = patterns.uid[country];
                if (uidPattern && !uidPattern.test(val)) {
                    valid = false;
                }
            }

            // Dynamic company register validation (optional field, only validate if filled)
            if (val && input.id === 'b_fb') {
                const country = document.getElementById('b_country').value;
                const companyPattern = patterns.companyRegister[country];
                if (companyPattern && !companyPattern.test(val)) {
                    valid = false;
                }
            }

            if (input.id === 'p_birthdate' && val) {
                 if(new Date(val) > new Date(maxDate)) valid = false;
            }

            if (!valid && (input.touched || input.value)) {
                input.classList.add('is-invalid');
                input.classList.remove('is-valid');
            } else if (valid && val) {
                input.classList.remove('is-invalid');
                input.classList.add('is-valid');
            } else {
                input.classList.remove('is-invalid', 'is-valid');
            }
            return valid;
        }

        document.querySelectorAll('input, select').forEach(input => {
            input.addEventListener('blur', () => {
                input.touched = true;
                validateInput(input);
                updateProgress();
            });
            input.addEventListener('input', () => {
                if (input.classList.contains('is-invalid') || input.classList.contains('is-valid')) {
                    validateInput(input);
                }
                updateProgress();
            });
        });

        function updateProgress() {
            const activeSection = currentType === 'private' ? 'section-private' : 'section-business';
            const inputs = document.querySelectorAll(`#${activeSection} input[required], #${activeSection} select[required], #referral, #legal_privacy, #legal_terms`);
            let filled = 0;
            let total = inputs.length;

            inputs.forEach(inp => {
                if(inp.type === 'checkbox' ? inp.checked : inp.value.trim() !== '') filled++;
            });

            const pct = Math.max(10, (filled / total) * 100);
            progressBar.style.width = `${pct}%`;
        }

        // Handle country change for business customers - update placeholders and revalidate
        document.getElementById('b_country').addEventListener('change', function() {
            const country = this.value;
            const uidInput = document.getElementById('b_uid');
            const fbInput = document.getElementById('b_fb');
            const uidError = document.getElementById('b_uid_error');
            const fbError = document.getElementById('b_fb_error');

            // Update UID placeholder based on country
            uidInput.placeholder = uidInput.getAttribute(`data-placeholder-${country.toLowerCase()}`);

            // Update UID error message based on country
            const uidMessages = {
                AT: 'Format: ATU gefolgt von 8 Ziffern (z.B. ATU12345678)',
                DE: 'Format: DE gefolgt von 9 Ziffern (z.B. DE123456789)'
            };
            uidError.textContent = uidMessages[country] || uidMessages.AT;

            // Update company register placeholder based on country
            fbInput.placeholder = fbInput.getAttribute(`data-placeholder-${country.toLowerCase()}`);

            // Update company register error message based on country
            const fbMessages = {
                AT: 'Format: FN + 6 Ziffern + Buchstabe (z.B. FN 123456p)',
                DE: 'Format: HRB/HRA + Nummer (z.B. HRB 12345)'
            };
            fbError.textContent = fbMessages[country] || fbMessages.AT;

            // Revalidate fields if they have been touched or have values
            if (uidInput.touched || uidInput.value) {
                validateInput(uidInput);
            }
            if (fbInput.touched || fbInput.value) {
                validateInput(fbInput);
            }
        });

        // Submit Handler
        document.getElementById('onboardingForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            const activeSection = currentType === 'private' ? 'section-private' : 'section-business';
            const inputs = document.querySelectorAll(`#${activeSection} input[required], #${activeSection} select[required], #referral`);
            let allValid = true;

            inputs.forEach(input => {
                input.touched = true;
                if (!validateInput(input)) allValid = false;
            });

            const privacy = document.getElementById('legal_privacy');
            const terms = document.getElementById('legal_terms');
            const legalError = document.getElementById('legal_error');

            if (!privacy.checked || !terms.checked) {
                legalError.style.display = 'block';
                allValid = false;
            } else {
                legalError.style.display = 'none';
            }

            if (!allValid) {
                const firstError = document.querySelector('.is-invalid, .error-msg[style="display: block;"]');
                if (firstError) {
                    firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
                return;
            }

            // Prepare form data
            let formData = {
                source: 'onboarding',
                form_type: 'onboarding',
                customer_type: currentType,
                timestamp: new Date().toISOString(),
                referral: document.getElementById('referral').value
            };

            if (currentType === 'private') {
                formData.firstname = document.getElementById('p_firstname').value.trim();
                formData.lastname = document.getElementById('p_lastname').value.trim();
                formData.email = document.getElementById('p_email').value.trim();
                formData.phone = document.getElementById('p_phone').value.trim();
                formData.birthdate = document.getElementById('p_birthdate').value;
                formData.address = {
                    street: document.getElementById('p_street').value.trim(),
                    zip: document.getElementById('p_zip').value.trim(),
                    city: document.getElementById('p_city').value.trim(),
                    country: document.getElementById('p_country').value
                };
            } else {
                formData.company = document.getElementById('b_company').value.trim();
                formData.contact_person = document.getElementById('b_contact').value.trim();
                formData.email = document.getElementById('b_email').value.trim();
                formData.phone = document.getElementById('b_phone').value.trim();
                formData.address = {
                    street: document.getElementById('b_street').value.trim(),
                    zip: document.getElementById('b_zip').value.trim(),
                    city: document.getElementById('b_city').value.trim(),
                    country: document.getElementById('b_country').value
                };
                formData.uid = document.getElementById('b_uid').value.trim();
                formData.firmenbuch = document.getElementById('b_fb').value.trim();
            }

            formData.legal = {
                privacy_accepted: privacy.checked,
                terms_accepted: terms.checked
            };

            const btn = document.getElementById('submitBtn');
            const originalBtnContent = btn.innerHTML;
            btn.disabled = true;
            btn.innerHTML = '<span>Wird gesendet...</span>';
            btn.classList.add('opacity-80', 'cursor-not-allowed');

            try {
                const response = await fetch('https://hook.eu1.make.com/irg40nzw2tquli2naodlie3odobn4jhd', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });

                if (response.ok) {
                    alert('✅ Ihr Onboarding wurde erfolgreich übermittelt! Wir melden uns zeitnah bei Ihnen.');
                    document.getElementById('onboardingForm').reset();
                    setCustomerType('private'); // Reset to default
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                } else {
                    throw new Error('Server error');
                }
            } catch (error) {
                console.error('Form submission error:', error);
                alert('❌ Fehler beim Senden des Onboardings. Bitte versuchen Sie es erneut oder kontaktieren Sie uns direkt per E-Mail an info@tx-partner.at');
            } finally {
                btn.disabled = false;
                btn.innerHTML = originalBtnContent;
                btn.classList.remove('opacity-80', 'cursor-not-allowed');
            }
        });

        setCustomerType('private');
    </script>

</body>
</html>
